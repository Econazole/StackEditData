[TOC]

#### Q1：在视频编码流程中，为什么DCT变换后好量化

DCT变换后好量化，可以理解成DCT变换简化了量化操作。那么问题变成：

DCT变换前后数据的区别？
使用DCT变换后的数据去做量化可以简化哪些操作？

1. DCT变换前的数据分布是无规律的，在DCT变换后，大数值集中在左上角（低频的、幅值高的、重要的信息），右下角的数值较小且趋于0（人类不敏感的、高频的、却又低振幅的数据）
![输入图片说明](/imgs/2024-07-15/rC4sJivQ3I1or6fF.png =800x)

2. 量化的操作可分为：1. 选择量化步长；2. 应用量化矩阵；3. 执行量化操作
	DCT变换后的数据便于量化步长的选择，通过选择合适的量化步长，可以将右下角的数值变成0，将左上角的数值缩小。
	而DCT变换前的数据没有规律，无法选取一个量化步长，使得重要信息得以保留的同时，压缩不重要信息

#### Q2：为什么选择DCT而不是其他变换方法？

有哪些常见的变换方法？DCT的优势是什么？

K-L变换：编码性能理想，但是变换矩阵随图像而异，不同图像需计算不同的变换矩阵
小波变换：相对于DCT，计算量较大；在图像的边缘，小波变换可能会产生边界效应，导致图像质量下降
边界效应指的是在数据集的边缘区域，由于数据不足或处理方法的局限性，导致分析结果不准确或异常的现象。

DCT：
- ==性能最接近K-L变换==
- ==具有快速算法（快速傅里叶变换、矩阵分解），变换矩阵可以预先计算好并存储，能被重复使用==
- DCT变换后方便了量化步长的选择
- 进行锯齿形（Z字形）扫描后可以把0都聚在一起，方便进行游程编码

DCT的作用：==简化计算、去除冗余==

#### Q3：JPEG 和 h264 编码结构中最大的区别是什么？

JPEG是对一帧、独立的静止图像的压缩标准，而 h264 是对多帧、相互关联的图像进行压缩的标准。
因此 JPEG 用到的是帧内编码技术，而 h264 除了帧内编码，还用到了帧间编码等其他技术。

==看书上的图，两个编码结构图差了哪些东西==

#### Q4：在实际编码中，量化步长是怎么取的，遵循什么规律，是按照下面的公式吗？

![输入图片说明](/imgs/2024-07-15/yGgOWXEV9RcJip6U.png =600x)

在H.264编码中，量化步长是根据量化参数 QP 来确定的，在量化步长表中，QP是量化步长的序号。所以上面的公式说错了，QP不是量化步长，而是量化步长的序号。

在实际编码中，量化步长可以是固定的，也可以是动态变化的。如 FIXQP、CBR、VBR、AVBR等都是通过控制QP来实现想要的效果。

#### Q5：用文本编辑器打开码流文件，找到序列参数级、SEI、Picture参数集、I等
![输入图片说明](/imgs/2024-07-15/tZ3cEmY8y7kiatYG.png =800x)

==要在一个码流图中找到所有上图中的所有类型==

序列参数集PPS：0 11 00111
![输入图片说明](/imgs/2024-07-15/oeSpLGvfSg9zqY3G.png)

图像参数集SPS：0 11 01000
![输入图片说明](/imgs/2024-07-15/GtmFVn0b5I62XgT1.png)

IDR图像中的片：0 11 00101
![输入图片说明](/imgs/2024-07-15/NEuf98VCxQFuXwxs.png)

普通Slice：0 10 0001
![输入图片说明](/imgs/2024-07-15/mDqzIHFazn2sjXN5.png)

#### Q6：h264的一个MB的大小
每个MB由4个亮度块（16x16）、1个Cr块（8x8）、1个Cb块（8x8）组成，==这句话是有 yuv格式是 420 这个前提的==

一个宏块的大小是16×16像素，但这只是亮度（Luma，通常标记为Y）部分的大小。色度（Chroma，通常标记为Cb和Cr）部分的大小会根据使用的子采样格式而变化，通常H.264采用4:2:0的子采样格式，这意味着色度部分的分辨率是亮度部分的一半。

宏块MB的组成如下：

1.  **亮度分量**：
    
    -   包含一个16×16像素的亮度块，用于亮度信息的编码。
2.  **色度分量**：
    
    -   通常包含两个8×8像素的色度块，分别对应Cb和Cr。在4:2:0子采样格式下，色度块的分辨率是亮度块的一半。
3.  **附加信息**：
    
    -   宏块还可能包含一些额外的信息，比如宏块类型（如帧内预测、前向预测、双向预测等）、运动矢量（用于帧间预测）、量化参数、残差数据（经过变换和量化后的数据）等。

在编码过程中，宏块可以被进一步划分为更小的块，以适应不同的预测模式和变换大小。例如，一个宏块可以被划分为4个8×8的亮度块和相应的色度块，甚至可以进一步划分为16个4×4的亮度块和色度块，这取决于编码效率和图像特性。
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTEwMDE2ODU2MjNdfQ==
-->